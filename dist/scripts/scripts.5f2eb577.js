"use strict";angular.module("aroundFrontendApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$sceDelegateProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/info",{templateUrl:"views/info.html",controller:"InfoCtrl"}).when("/confirm",{templateUrl:"views/confirm.html",controller:"ConfirmCtrl"}).when("/thanks",{templateUrl:"views/thanks.html",controller:"ThanksCtrl"}).when("/bio",{templateUrl:"views/bio.html",controller:"BioCtrl"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).when("/deleted",{templateUrl:"views/deleted.html",controller:"DeletedCtrl"}).otherwise({redirectTo:"/"}),b.resourceUrlWhitelist(["self","http://localhost:5000","https://api.instagram.com/**"])}]),angular.module("aroundFrontendApp").controller("MainCtrl",["$scope","Profile","$location",function(a,b,c){OAuth.initialize("_vTeGWW_0CzyINGc2l22NFBrhpk"),a.profile=b}]),angular.module("aroundFrontendApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("aroundFrontendApp").service("Profile",["$timeout","$http","$location","$cookies",function(a,b,c,d){var e={},f="https://around-production.herokuapp.com";return e.activate=function(){console.log(d),b.get(f+"/users").success(function(a){e.data=a,e.loggedIn=!0,console.log(a)})},e.activate(),e.connect=function(){OAuth.popup("facebook").done(function(c){c.me().done(function(d){console.log(c),a(function(){b.post(f+"/authenticate",{fid:d.id,token:c.access_token}).success(function(a){console.log(a),a.error?(e.next("info"),e.data={fid:d.id,link:d.raw.link,thumb:d.avatar,first_name:d.firstname,last_name:d.lastname,alias:d.firstname.toLowerCase(),email:d.email,birthday:new Date(d.birthdate.year,d.birthdate.month,d.birthdate.day),bio:d.about,gender:d.gender,token:c.access_token}):(e.data=a,e.loggedIn=!0,e.next("profile"))})},0)})}).fail(function(a){})},e.register=function(){b.post(f+"/users",e.data).success(function(a){e.loggedIn=!0})},e.remove=function(){b["delete"](f+"/users"+e.data.fid).success(function(a){e.loggedIn=!1,e.next("deleted")})},e.next=function(a){c.url(a)},e}]),angular.module("aroundFrontendApp").directive("center",["$window",function(a){return{restrict:"A",link:function(b,c,d){var e=(a.innerHeight-c.height())/2;c.css({position:"absolute",top:e,width:"100%"})}}}]),angular.module("aroundFrontendApp").controller("InfoCtrl",["$scope","Profile","$location",function(a,b,c){a.profile=b,a.phone=function(){var b=a.profile.data.phone;b&&3==b.length&&(b+="-"),b&&7==b.length&&(b+="-"),a.profile.data.phone=b},$("input,textarea").first().select()}]),angular.module("aroundFrontendApp").controller("ConfirmCtrl",["$scope","Profile",function(a,b){a.profile=b,a.register=function(){a.profile.register(),a.profile.next("thanks")}}]),angular.module("aroundFrontendApp").controller("ThanksCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("aroundFrontendApp").controller("BioCtrl",["$scope","Profile",function(a,b){a.profile=b,a.bio=function(a){13==a.keyCode&&(window.location="#/confirm")},$("input,textarea").first().focus()}]),angular.module("aroundFrontendApp").directive("spheres",["$interval",function(a){return{template:'<div class="spheres" style="width: {{ options.width }}px; height: {{ options.height }}px"><div class="sphere" ng-repeat="sphere in spheres" style="animation-delay: {{ sphere.offset }}s; border-width: {{ sphere.border }}px; width: {{ options.radius }}px; height: {{ options.radius }}px;"></div></div>',restrict:"A",scope:{count:"="},link:function(a,b,c){a.spheres=[],a.options={width:window.innerWidth,height:window.innerHeight,radius:window.innerHeight>window.innerWidth?.8*window.innerHeight:.8*window.innerWidth},a.count=a.count||3;for(var d=0;3>d;){var e={border:.05*Math.random()*a.options.radius,offset:6*-Math.random(),bottom:100*Math.random()};a.spheres.push(e),d++}}}}]),angular.module("aroundFrontendApp").controller("ProfileCtrl",["$scope","Profile",function(a,b){a.profile=b}]),angular.module("aroundFrontendApp").controller("DeletedCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);